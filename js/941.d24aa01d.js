"use strict";(self["webpackChunkfinal"]=self["webpackChunkfinal"]||[]).push([[941],{3803:function(t,e,s){s.d(e,{A:function(){return u}});var l=s(6768);const a={class:"my-5"},n=(0,l.Lk)("ul",{class:"progressbar list-unstyled d-flex justify-content-between"},[(0,l.Lk)("li",{class:"active"},"查看購物明細"),(0,l.Lk)("li",null,"填寫訂單資料"),(0,l.Lk)("li",null,"確認訂單完成")],-1),o=[n];function i(t,e){return(0,l.uX)(),(0,l.CE)("div",a,o)}var r=s(1241);const c={},d=(0,r.A)(c,[["render",i]]);var u=d},9941:function(t,e,s){s.r(e),s.d(e,{default:function(){return M}});var l=s(6768),a=s(5130),n=s(4232);const o={class:"container"},i={class:"row"},r={class:"col-md-8 mb-4 mx-auto"},c=(0,l.Lk)("h5",{class:"text-center py-3 bg-5 text-white rounded mt-4"},[(0,l.Lk)("i",{class:"bi bi-cart-fill",style:{"font-size":"1.5rem"}}),(0,l.eW)(" 購物車 ")],-1),d={key:0,class:"text-center mt-5"},u=(0,l.Lk)("p",{class:"h3 mb-5"},"購物車還是空的喔！",-1),p=(0,l.Lk)("p",{class:"h5 text-secondary"},[(0,l.eW)(" 再忙，也別忘了犒賞自己唷！ "),(0,l.Lk)("i",{class:"far fa-smile-wink"})],-1),k={class:"mt-5"},h={key:1},m={class:"table text-center"},L={class:"align-middle text-center",width:"30"},b=["onClick"],g=(0,l.Lk)("i",{class:"bi bi-trash3"},[(0,l.Lk)("span",{style:{"font-size":"0rem"}},"刪除")],-1),f=[g],v={class:"align-middle",width:"100"},C=["src","alt"],y={class:"align-middle"},x={class:"align-middle",width:"100"},q={class:"input-group input-group-sm"},w=(0,l.Lk)("label",{for:"unit"},null,-1),$=["onChange","onUpdate:modelValue"],_={class:"input-group-text rounded-0"},E={class:"align-middle text-end"},F={class:"input-group mb-3 input-group-sm"},X=(0,l.Lk)("label",{for:"coupon"},null,-1),W={class:"input-group-append"},A={class:"table mt-4"},U={class:"h5"},I=(0,l.Lk)("td",{colspan:"4",class:"text-end"},[(0,l.Lk)("strong",null,"共計")],-1),V={class:"text-end"},z={class:"form-row d-flex"},B={class:"d-grid col m-1"},D=(0,l.Lk)("i",{class:"bi bi-caret-left-fill mr-2"},null,-1),J={class:"d-grid col m-1"},P=(0,l.Lk)("i",{class:"bi bi-caret-right-fill ml-2"},null,-1);function j(t,e,s,g,j,K){const N=(0,l.g2)("ProgressBar"),G=(0,l.g2)("router-link");return(0,l.uX)(),(0,l.CE)("div",o,[(0,l.bF)(N),(0,l.Lk)("div",i,[(0,l.Lk)("div",r,[c,j.cart.carts.length?((0,l.uX)(),(0,l.CE)("div",h,[(0,l.Lk)("table",m,[(0,l.Lk)("tbody",null,[((0,l.uX)(!0),(0,l.CE)(l.FK,null,(0,l.pI)(j.cart.carts,(e=>((0,l.uX)(),(0,l.CE)("tr",{key:e.id},[(0,l.Lk)("td",L,[(0,l.Lk)("a",{onClick:(0,a.D$)((t=>K.removeCartItem(e.id)),["prevent"]),href:"#",class:"text-secondary"},f,8,b)]),(0,l.Lk)("td",v,[(0,l.Lk)("img",{src:e.product.imageUrl,width:"100%",alt:e.product.title},null,8,C)]),(0,l.Lk)("td",y,(0,n.v_)(e.product.title),1),(0,l.Lk)("td",x,[(0,l.Lk)("div",q,[w,(0,l.bo)((0,l.Lk)("input",{onChange:t=>K.updateCart(e.id,e.qty),"onUpdate:modelValue":t=>e.qty=t,min:"1",id:"unit",type:"number",class:"form-control"},null,40,$),[[a.Jo,e.qty,void 0,{number:!0}]]),(0,l.Lk)("div",_,"/ "+(0,n.v_)(e.product.unit),1)])]),(0,l.Lk)("td",E,"$"+(0,n.v_)(t.$filters.currency(e.final_total)),1)])))),128))])]),(0,l.Lk)("div",F,[X,(0,l.bo)((0,l.Lk)("input",{"onUpdate:modelValue":e[0]||(e[0]=t=>j.coupon=t),id:"coupon",type:"text",class:"form-control",placeholder:"請輸入優惠碼"},null,512),[[a.Jo,j.coupon]]),(0,l.Lk)("div",W,[(0,l.Lk)("button",{onClick:e[1]||(e[1]=(0,a.D$)(((...t)=>K.addCoupon&&K.addCoupon(...t)),["prevent"])),class:"btn btn-outline-secondary",type:"button"}," 套用優惠碼 ")])]),(0,l.Lk)("div",null,[(0,l.Lk)("table",A,[(0,l.Lk)("tbody",null,[(0,l.Lk)("tr",U,[I,(0,l.Lk)("td",V,[(0,l.Lk)("strong",null,"$"+(0,n.v_)(t.$filters.currency(j.cart.final_total)),1)])])])])]),(0,l.Lk)("div",z,[(0,l.Lk)("div",B,[(0,l.bF)(G,{to:"/products",class:"btn btn-outline-secondary"},{default:(0,l.k6)((()=>[D,(0,l.eW)(" 繼續購物 ")])),_:1})]),(0,l.Lk)("div",J,[(0,l.bF)(G,{to:"/order",class:"btn btn-primary text-white"},{default:(0,l.k6)((()=>[(0,l.eW)(" 繼續付款 "),P])),_:1})])])])):((0,l.uX)(),(0,l.CE)("div",d,[u,p,(0,l.Lk)("div",k,[(0,l.bF)(G,{to:"/products",class:"btn btn-primary btn-lg"},{default:(0,l.k6)((()=>[(0,l.eW)("來去逛逛")])),_:1})])]))])])])}var K=s(3803),N={components:{ProgressBar:K.A},data(){return{cart:{carts:[],total:0,final_total:0},coupon:""}},methods:{getCart(){const t="https://vue3-course-api.hexschool.io/api/qq-api/cart";this.$http.get(t).then((t=>{this.cart=t.data.data,console.log("取得購物車",this.cart)}))},removeCartItem(t){const e=`https://vue3-course-api.hexschool.io/api/qq-api/cart/${t}`;this.$http.delete(e).then((t=>{console.log("刪除",t),this.getCart(),this.emitter.emit("resetCart")}))},updateCart(t,e=1){const s=`https://vue3-course-api.hexschool.io/api/qq-api/cart/${t}`,l={product_id:t,qty:e};this.$http.put(s,{data:l}).then((t=>{console.log("更新購物車",t),this.emitter.emit("resetCart"),this.getCart()}))},addCoupon(){const t="https://vue3-course-api.hexschool.io/api/qq-api/coupon";this.$http.post(t,{data:{code:this.coupon}}).then((t=>{console.log("添加優惠券",t),this.emitter.emit("resetCart"),this.getCart()}))}},created(){this.getCart(),this.emitter.on("resetCartFromNav",this.getCart)}},G=s(1241);const H=(0,G.A)(N,[["render",j]]);var M=H}}]);
//# sourceMappingURL=941.d24aa01d.js.map